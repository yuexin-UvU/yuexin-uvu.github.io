<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>博物馆生存指南 V11.0 (温情职场版)</title>
        <link rel="stylesheet" href="styles.css">
</head>
<body>

<div id="start-screen">
    <div class="pixel-museum">🏛️</div>
    <div class="game-title">博物馆生存指南</div>
    <button class="btn-start" onclick="startGame()">开始游戏</button>
</div>

<div id="app">
    <div class="panel" id="col-left">
        <button class="settings-btn">⚙️</button>
        <div class="settings-menu">
            <div class="menu-item" onclick="game.undoQuarter()">↺ 返回上一季度</div>
            <div class="menu-item" onclick="location.reload()">☠ 重置所有数据</div>
        </div>

        <div class="profile-card">
            <div class="avatar">🏛️</div>
            <div class="tooltip" id="user-intro">
                【个人档案】<br>
                一名怀揣梦想进入博物馆行业的年轻人。<br>
                性格：随机生成<br>
                特长：头发浓密（暂时）<br>
                座右铭：为了文物，为了经费！
            </div>
            <div class="user-name" id="ui-name">NoName</div>
            <div class="user-title" id="ui-title">助理馆员</div>
            <div style="font-size:0.8rem; margin-top:5px; color:#90a4ae;" id="ui-edu">PHD</div>
            <div style="font-size:0.8rem; margin-top:2px; color:#90a4ae;">年龄：<span id="ui-age">0</span>岁</div>
            <button id="btn-promote" class="primary" style="width:100%; margin-top:15px; font-size:0.85rem;" onclick="game.actionPromote()" disabled>申请职称评定</button>
        </div>

        <div class="stats-grid">
            <div class="stat-item"><span class="stat-label">智商</span><span class="stat-num" id="ui-iq">0</span></div>
            <div class="stat-item"><span class="stat-label">情商</span><span class="stat-num" id="ui-eq">0</span></div>
            <div class="stat-item"><span class="stat-label">声望</span><span class="stat-num" id="ui-rep">0</span></div>
            <div class="stat-item"><span class="stat-label">公款</span><span class="stat-num" id="ui-money" style="font-size:0.9rem">0</span></div>
            <div class="stat-item"><span class="stat-label">存款</span><span class="stat-num" id="ui-savings" style="font-size:0.9rem">0</span></div>
        </div>

        <div class="bars-area">
            <div class="bar-row">
                <div class="bar-label"><span>健康</span><span id="txt-health">100</span></div>
                <div class="bar-track"><div class="bar-fill" id="bar-health" style="background:var(--danger)"></div></div>
            </div>
            <div class="bar-row">
                <div class="bar-label"><span>愉悦</span><span id="txt-mood">100</span></div>
                <div class="bar-track"><div class="bar-fill" id="bar-mood" style="background:var(--warning)"></div></div>
            </div>
        </div>

        <div class="leisure-section">
            <div class="leisure-header">
                <span>☕ 摸鱼休息</span> <span id="limit-leisure" style="color:var(--primary)">2/2</span>
            </div>
            <div class="leisure-grid" style="display:grid; gap:8px;">
                <button class="btn-leisure" style="display:flex; justify-content:space-between;" onclick="game.actionLeisure('slack')"><span>闭目养神</span><span>💤</span></button>
                <button class="btn-leisure" style="display:flex; justify-content:space-between;" onclick="game.actionLeisure('read')"><span>阅读书籍</span><span>📚</span></button>
                <button class="btn-leisure" style="display:flex; justify-content:space-between;" onclick="game.actionLeisure('gossip')"><span>聊聊八卦</span><span>💬</span></button>
            </div>
        </div>

        <div class="shop-section">
            <div class="shop-header">🛒 文创商店</div>
            <div class="shop-grid">
                <button class="btn-shop" onclick="game.actionShop('coffee')">
                    <span>☕ 咖啡</span><span style="font-size:0.75em; color:#999">50元</span>
                </button>
                <button class="btn-shop" onclick="game.actionShop('meal')">
                    <span>🍱 小食套餐</span><span style="font-size:0.75em; color:#999">100元</span>
                </button>
            </div>
        </div>
    </div>

    <div class="panel" id="col-middle" style="background:#f8faff; border:none; padding:0; box-shadow:none;">
    
    <div class="middle-nav">
        <div class="nav-tab active" onclick="game.switchScene('office')" id="tab-office">🏢 办公室</div>
        <div class="nav-tab" onclick="game.switchScene('university')" id="tab-university">🎓 大学</div>
        <div class="nav-tab locked" onclick="game.switchScene('home')" id="tab-home">🏠 家庭</div>
    </div>

    <div id="view-office" class="view-container active">
        <div class="nav-block">
            <div class="nav-title">
                <span>🔬 科研项目</span>
                <span style="font-size:0.9rem; color:var(--text-sub)" id="research-count">0/5</span>
            </div>
            <div style="display:flex; justify-content:space-between; align-items:center;">
                <span id="research-msg" style="font-size:0.85rem; color:var(--text-sub);">窗口期关闭</span>
                <button id="btn-research" class="primary" onclick="game.actionResearch()" disabled>申报</button>
            </div>
        </div>

        <div class="nav-block" style="flex:1; display:flex; flex-direction:column; overflow:hidden;">
            <div class="nav-title">
                <span>🏛️ 展览策划</span>
                <div style="font-size:0.8rem; color:#e57373;">每次操作消耗少量健康</div>
            </div>
            
            <button id="btn-new-exhibit" class="primary" style="margin-bottom:15px; width:100%; padding:12px;" onclick="game.actionApplyExhibit()">+ 申请新展览</button>
            
            <div id="exhibits-container" style="flex:1; overflow-y:auto; padding-right:5px;"></div>
        </div>
    </div>

    <div id="view-university" class="view-container">
        <div class="scene-placeholder">
            <div class="scene-icon">🎓</div>
            <h3>学术深造中心</h3>
            <p>在这里攻读更高学位，提升基础智商上限。</p>
            <div style="margin-top:20px; width:100%">
                <button class="primary" style="width:100%; padding:15px; margin-bottom:10px" onclick="game.actionStudy('course')">
                    参加进修课程 (5000元)<br>
                    <span style="font-size:0.8em; opacity:0.8">+智商 +声望 -精力</span>
                </button>
                <button id="btn-degree" class="primary" style="width:100%; padding:15px; background:#7e57c2" onclick="game.actionStudy('degree')">
                    <span id="degree-title">申请在职博士 (50000元)</span><br>
                    <span id="degree-desc" style="font-size:0.8em; opacity:0.8">晋升学历 (需硕士学位)</span>
                </button>
            </div>
        </div>
    </div>

    <div id="view-home" class="view-container">
        <div class="scene-placeholder">
            <div class="scene-icon">🔒</div>
            <h3>温馨小窝</h3>
            <p>这里是你心灵的港湾。</p>
            <p style="color:var(--danger); margin-top:10px">解锁条件：个人存款达到 100,000 元</p>
        </div>
        <div id="home-content" class="hidden" style="width:100%">
            <p>欢迎回家！这里可以恢复大量心情。</p>
        </div>
    </div>

</div>

    <div class="panel" id="col-right">
        <div class="log-header">
            <span>工作周报</span><span class="log-tag">Y<span id="ui-year">1</span> - Q<span id="ui-quarter">1</span></span>
        </div>
        <div id="log-container"></div>
        <button class="primary" onclick="game.nextQuarter()" style="margin-top:15px; height:55px; font-size:1.1rem; border-radius:16px;">结束本季度 🌙</button>
    </div>
</div>

<div id="modal-overlay" class="modal-overlay hidden" onclick="game.tryCloseModal(event)">
    <div class="modal-box" onclick="event.stopPropagation()">
        <div class="modal-title" id="modal-title">TITLE</div>
        <div class="modal-text" id="modal-text">Content...</div>
        <div class="choice-list" id="modal-choices"></div>
    </div>
</div>

<div id="onboarding-overlay" class="onboarding-overlay hidden" onclick="game.closeOnboarding()">
    <div class="onboarding-card" onclick="event.stopPropagation()">
        <div class="onboarding-header">
            <div class="onboarding-title">????</div>
            <button class="onboarding-close" onclick="game.closeOnboarding()">????</button>
        </div>
        <div class="onboarding-body">
            <div class="onboarding-section">
                <div class="onboarding-section-title">????</div>
                <div class="onboarding-paragraph">?????????????? <span class="highlight">6?</span> ?????????????????</div>
            </div>
            <div class="onboarding-section">
                <div class="onboarding-section-title">????</div>
                <ul class="onboarding-list">
                    <li>?????6?????????</li>
                    <li>??????? &lt; -10?</li>
                    <li>??????? ? 0</li>
                    <li>??????? ? -50</li>
                    <li>?????????? ? 100</li>
                    <li>???????? &gt; 5?</li>
                </ul>
            </div>
            <div class="onboarding-section" style="margin-bottom:0;">
                <div class="onboarding-section-title">??/????</div>
                <ul class="onboarding-list">
                    <li>????????????????</li>
                    <li>???????????????????</li>
                    <li>???????? :D</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<script src="data.js"></script>
<script src="game.js"></script>
<script src="main.js"></script>
